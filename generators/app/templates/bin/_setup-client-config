#!/usr/bin/env node
'use strict';

const fs = require('fs'),
    path = require('path'),
    _ = require('lodash'),
    destPath = path.join(__dirname, '../src/client.config.json'),
    distPath = path.join(__dirname, '../src/client.config.dist.json');

fs.exists(destPath, (exists) => {

    const distJSON = JSON.parse(fs.readFileSync(distPath));

    let targetJSON = distJSON;

    console.log('Updating Configuration:');

    if(exists) {

        const destJSON = JSON.parse(fs.readFileSync(destPath));

        targetJSON = _.merge(distJSON, destJSON);

    }

    console.log(targetJSON);

    fs.writeFileSync(destPath, JSON.stringify(targetJSON, null, 2));

});
